---
import BaseLayout from "../layouts/BaseLayout.astro";
import HorizontalCard from "../components/HorizontalCard.astro";
import { getCollection } from "astro:content";
import createSlug from "../lib/createSlug";

// Get publications sorted by date
const publications = (await getCollection("publications")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
const last_publications = publications.slice(0, 3);

// Get and sort projects by numeric 'order'
const projects = (await getCollection("projects")).sort((a, b) => {
  const orderA = typeof a.data.order === "number" ? a.data.order : 9999;
  const orderB = typeof b.data.order === "number" ? b.data.order : 9999;
  if (orderA !== orderB) return orderA - orderB;
  return String(a.data.title).localeCompare(String(b.data.title));
});
const last_projects = projects.slice(0, 3);

---

<BaseLayout sideBarActiveItemID="home">
  <div class="pb-12 mt-5">
    <div class="text-xl py-1">Hello ðŸ‘‹</div>
    <div class="text-5xl font-bold">I'm Aniket Nath</div>
    <div class="text-3xl py-3 font-bold">
      Long Term Visiting Student at ICTS-TIFR | Aspiring PhD Candidate
    </div>
    <div class="py-2">
      <text class="text-lg">
        I am broadly interested in theoretical and computational aspects of Astrophysics and Cosmology, with specific interests in the fields of General Relativistic Magnetohydrodynamical studies of accretion disks around compact objects, astrophysical jets, large-scale structure formation, 21cm cosmology, cosmic magnetism, statistical tools for cosmology. I am also interested in the application of Machine Learning techniques in corresponding fields.
      </text>
    </div>
    <div class="mt-8">
      <a href="/Aniket_Nath_CV.pdf" target="_blank" class="btn btn-outline ml-5">
        Download CV
      </a>
    </div>
  </div>

  <div>
    <div class="text-3xl w-full font-bold mb-2">Selected Projects</div>
  </div>

  {last_projects.map((project) => (
    <>
      <HorizontalCard
        title={project.data.title}
        img={project.data.heroImage}
        desc={project.data.description}
        url={"/projects/" + createSlug(project.data.title, project.slug)}
        target="_self"
        badge={project.data.badge}
      />
      <div class="divider my-0" />
    </>
  ))}

  <div>
    <div class="text-3xl w-full font-bold mb-5 mt-10">Latest from Publications</div>
  </div>

  {last_publications.map((post) => (
    <>
      <HorizontalCard
        title={post.data.title}
        img={post.data.heroImage}
        desc={post.data.description}
        url={"/publications/" + createSlug(post.data.title, post.slug)}
        target="_self"
        badge={post.data.badge}
      />
      <div class="divider my-0" />
    </>
  ))}
</BaseLayout>

